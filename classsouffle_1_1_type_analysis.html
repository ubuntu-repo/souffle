<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>souffle: souffle::TypeAnalysis Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">souffle
   &#160;<span id="projectnumber">1.5.1-568-gdf7f668</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesouffle.html">souffle</a></li><li class="navelem"><a class="el" href="classsouffle_1_1_type_analysis.html">TypeAnalysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">souffle::TypeAnalysis Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for souffle::TypeAnalysis:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_type_analysis__inherit__graph.png" border="0" usemap="#souffle_1_1_type_analysis_inherit__map" alt="Inheritance graph"/></div>
<map name="souffle_1_1_type_analysis_inherit__map" id="souffle_1_1_type_analysis_inherit__map">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_analysis.html" title="Abstract class for a AST Analysis. " alt="" coords="9,5,154,112"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for souffle::TypeAnalysis:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_type_analysis__coll__graph.png" border="0" usemap="#souffle_1_1_type_analysis_coll__map" alt="Collaboration graph"/></div>
<map name="souffle_1_1_type_analysis_coll__map" id="souffle_1_1_type_analysis_coll__map">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_analysis.html" title="Abstract class for a AST Analysis. " alt="" coords="5,5,151,112"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad712d537f166af824ce980aac5088b09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#ad712d537f166af824ce980aac5088b09">getTypes</a> (const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a> *argument) const </td></tr>
<tr class="memdesc:ad712d537f166af824ce980aac5088b09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the computed types for the given argument.  <a href="#ad712d537f166af824ce980aac5088b09">More...</a><br /></td></tr>
<tr class="separator:ad712d537f166af824ce980aac5088b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8b14d983a147434ebbbea66d4072229"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#ad8b14d983a147434ebbbea66d4072229">print</a> (std::ostream &amp;os) const override</td></tr>
<tr class="memdesc:ad8b14d983a147434ebbbea66d4072229"><td class="mdescLeft">&#160;</td><td class="mdescRight">print the analysis result in HTML format  <a href="#ad8b14d983a147434ebbbea66d4072229">More...</a><br /></td></tr>
<tr class="separator:ad8b14d983a147434ebbbea66d4072229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37750304e3c3efc004294bbc934e8549"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#a37750304e3c3efc004294bbc934e8549">run</a> (const <a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit) override</td></tr>
<tr class="memdesc:a37750304e3c3efc004294bbc934e8549"><td class="mdescLeft">&#160;</td><td class="mdescRight">run analysis for a RAM translation unit  <a href="#a37750304e3c3efc004294bbc934e8549">More...</a><br /></td></tr>
<tr class="separator:a37750304e3c3efc004294bbc934e8549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsouffle_1_1_ast_analysis"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsouffle_1_1_ast_analysis')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classsouffle_1_1_ast_analysis.html">souffle::AstAnalysis</a></td></tr>
<tr class="memitem:a539a236ce3a9c9e6efc7c712b8720df9 inherit pub_methods_classsouffle_1_1_ast_analysis"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_ast_analysis.html#a539a236ce3a9c9e6efc7c712b8720df9">~AstAnalysis</a> ()=default</td></tr>
<tr class="separator:a539a236ce3a9c9e6efc7c712b8720df9 inherit pub_methods_classsouffle_1_1_ast_analysis"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad03f4742d97ca60ab48f0f76ba0a1b0e"><td class="memItemLeft" align="right" valign="top">static std::map&lt; const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a> *, <a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#ad03f4742d97ca60ab48f0f76ba0a1b0e">analyseTypes</a> (const <a class="el" href="classsouffle_1_1_type_environment.html">TypeEnvironment</a> &amp;env, const <a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a> &amp;clause, const <a class="el" href="classsouffle_1_1_ast_program.html">AstProgram</a> *program, std::ostream *logs=nullptr)</td></tr>
<tr class="memdesc:ad03f4742d97ca60ab48f0f76ba0a1b0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyse the given clause and computes for each contained argument a set of potential types.  <a href="#ad03f4742d97ca60ab48f0f76ba0a1b0e">More...</a><br /></td></tr>
<tr class="separator:ad03f4742d97ca60ab48f0f76ba0a1b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a88c2b46242dcb7466a869059309b965e"><td class="memItemLeft" align="right" valign="top">static constexpr const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#a88c2b46242dcb7466a869059309b965e">name</a> = &quot;type-analysis&quot;</td></tr>
<tr class="separator:a88c2b46242dcb7466a869059309b965e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:afc9b7ee6a35619da76e4277ee8b63ed3"><td class="memItemLeft" align="right" valign="top">std::stringstream&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#afc9b7ee6a35619da76e4277ee8b63ed3">analysisLogs</a></td></tr>
<tr class="separator:afc9b7ee6a35619da76e4277ee8b63ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9b0bfb44850f1c3295306cd9cea7c84"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#ac9b0bfb44850f1c3295306cd9cea7c84">annotatedClauses</a></td></tr>
<tr class="separator:ac9b0bfb44850f1c3295306cd9cea7c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78a3ac07ebd79b4d3e3d1c277522178"><td class="memItemLeft" align="right" valign="top">std::map&lt; const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a> *, <a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">argumentTypes</a></td></tr>
<tr class="separator:aa78a3ac07ebd79b4d3e3d1c277522178"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00035">35</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad03f4742d97ca60ab48f0f76ba0a1b0e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a> *, <a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a> &gt; souffle::TypeAnalysis::analyseTypes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_type_environment.html">TypeEnvironment</a> &amp;&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a> &amp;&#160;</td>
          <td class="paramname"><em>clause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_ast_program.html">AstProgram</a> *&#160;</td>
          <td class="paramname"><em>program</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream *&#160;</td>
          <td class="paramname"><em>logs</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Analyse the given clause and computes for each contained argument a set of potential types. </p>
<p>Generic type analysis framework for clauses.</p>
<p>If the set associated to an argument is empty, no consistent typing can be found and the rule can not be properly typed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>a typing environment describing the set of available types </td></tr>
    <tr><td class="paramname">clause</td><td>the clause to be typed </td></tr>
    <tr><td class="paramname">program</td><td>the program </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a map mapping each contained argument to a a set of types </dd></dl>

<p>Definition at line <a class="el" href="_ast_type_analysis_8cpp_source.html#l00364">364</a> of file <a class="el" href="_ast_type_analysis_8cpp_source.html">AstTypeAnalysis.cpp</a>.</p>

<p>References <a class="el" href="_ast_functor_declaration_8h_source.html#l00079">souffle::AstFunctorDeclaration::acceptsNumbers()</a>, <a class="el" href="_ast_argument_8h_source.html#l00322">souffle::AstIntrinsicFunctor::acceptsNumbers()</a>, <a class="el" href="_ast_functor_declaration_8h_source.html#l00073">souffle::AstFunctorDeclaration::acceptsSymbols()</a>, <a class="el" href="_ast_argument_8h_source.html#l00327">souffle::AstIntrinsicFunctor::acceptsSymbols()</a>, <a class="el" href="_ast_argument_8h_source.html#l00289">souffle::AstIntrinsicFunctor::getArg()</a>, <a class="el" href="_ast_argument_8h_source.html#l00406">souffle::AstUserDefinedFunctor::getArg()</a>, <a class="el" href="_ast_argument_8h_source.html#l00412">souffle::AstUserDefinedFunctor::getArgCount()</a>, <a class="el" href="_ast_literal_8h_source.html#l00104">souffle::AstAtom::getArguments()</a>, <a class="el" href="_ast_argument_8h_source.html#l00487">souffle::AstRecordInit::getArguments()</a>, <a class="el" href="_ast_argument_8h_source.html#l00298">souffle::AstIntrinsicFunctor::getArity()</a>, <a class="el" href="_ast_literal_8h_source.html#l00182">souffle::AstNegation::getAtom()</a>, <a class="el" href="_ast_utils_8cpp_source.html#l00049">souffle::getAtomRelation()</a>, <a class="el" href="_ast_argument_8h_source.html#l00294">souffle::AstIntrinsicFunctor::getFunction()</a>, <a class="el" href="_ast_program_8cpp_source.html#l00118">souffle::AstProgram::getFunctorDeclaration()</a>, <a class="el" href="_ast_literal_8h_source.html#l00364">souffle::AstBinaryConstraint::getLHS()</a>, <a class="el" href="_ast_argument_8h_source.html#l00396">souffle::AstUserDefinedFunctor::getName()</a>, <a class="el" href="_type_system_8h_source.html#l00351">souffle::TypeEnvironment::getNumberType()</a>, <a class="el" href="_ast_literal_8h_source.html#l00369">souffle::AstBinaryConstraint::getRHS()</a>, <a class="el" href="_type_system_8h_source.html#l00355">souffle::TypeEnvironment::getSymbolType()</a>, <a class="el" href="_ast_argument_8h_source.html#l00619">souffle::AstAggregator::getTargetExpression()</a>, <a class="el" href="_type_system_8cpp_source.html#l00097">souffle::TypeEnvironment::getType()</a>, <a class="el" href="json11_8h_source.html#l00669">i</a>, <a class="el" href="_ast_functor_declaration_8h_source.html#l00067">souffle::AstFunctorDeclaration::isNumerical()</a>, <a class="el" href="_ast_argument_8h_source.html#l00312">souffle::AstIntrinsicFunctor::isNumerical()</a>, <a class="el" href="_type_system_8cpp_source.html#l00364">souffle::isSubtypeOf()</a>, <a class="el" href="_ast_functor_declaration_8h_source.html#l00061">souffle::AstFunctorDeclaration::isSymbolic()</a>, <a class="el" href="_ast_argument_8h_source.html#l00317">souffle::AstIntrinsicFunctor::isSymbolic()</a>, <a class="el" href="_type_system_8cpp_source.html#l00083">souffle::TypeEnvironment::isType()</a>, <a class="el" href="_resolve_aliases_transformer_8cpp_source.html#l00159">lhs</a>, <a class="el" href="namespacesouffle.html#a28ddd8269d2a01a6041800d3b2e3fad9ac23431d0209648a6b31fa837dd56d681">souffle::ORD</a>, and <a class="el" href="_resolve_aliases_transformer_8cpp_source.html#l00160">rhs</a>.</p>

<p>Referenced by <a class="el" href="_ast_type_analysis_8h_source.html#l00046">getTypes()</a>, and <a class="el" href="_ast_transforms_8cpp_source.html#l00213">souffle::MaterializeAggregationQueriesTransformer::materializeAggregationQueries()</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                                                                                          {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keyword">struct </span>Analysis : <span class="keyword">public</span> AstConstraintAnalysis&lt;TypeVar&gt; {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keyword">const</span> TypeEnvironment&amp; env;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keyword">const</span> AstProgram* program;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        std::set&lt;const AstAtom*&gt; negated;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        Analysis(<span class="keyword">const</span> TypeEnvironment&amp; env, <span class="keyword">const</span> AstProgram* program) : env(env), program(program) {}</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="comment">// predicate</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordtype">void</span> visitAtom(<span class="keyword">const</span> AstAtom&amp; atom)<span class="keyword"> override </span>{</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="comment">// get relation</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keyword">auto</span> rel = <a class="code" href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0">getAtomRelation</a>(&amp;atom, program);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">if</span> (!rel) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <span class="keywordflow">return</span>;  <span class="comment">// error in input program</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keyword">auto</span> atts = rel-&gt;getAttributes();</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="keyword">auto</span> args = atom.getArguments();</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">if</span> (atts.size() != args.size()) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                <span class="keywordflow">return</span>;  <span class="comment">// error in input program</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="comment">// set upper boundary of argument types</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = 0; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> &lt; atts.size(); <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>++) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; typeName = atts[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>]-&gt;getTypeName();</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                <span class="keywordflow">if</span> (env.isType(typeName)) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                    <span class="comment">// check whether atom is not negated</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                    <span class="keywordflow">if</span> (negated.find(&amp;atom) == negated.end()) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                        addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(args[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>]), env.getType(typeName)));</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                        addConstraint(isSupertypeOf(getVar(args[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>]), env.getType(typeName)));</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                    }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="comment">// negations need to be skipped</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordtype">void</span> visitNegation(<span class="keyword">const</span> AstNegation&amp; cur)<span class="keyword"> override </span>{</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="comment">// add nested atom to black-list</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            negated.insert(cur.getAtom());</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="comment">// symbol</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordtype">void</span> visitStringConstant(<span class="keyword">const</span> AstStringConstant&amp; cnst)<span class="keyword"> override </span>{</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="comment">// this type has to be a sub-type of symbol</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(cnst), env.getSymbolType()));</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="comment">// number</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordtype">void</span> visitNumberConstant(<span class="keyword">const</span> AstNumberConstant&amp; cnst)<span class="keyword"> override </span>{</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="comment">// this type has to be a sub-type of number</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(cnst), env.getNumberType()));</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="comment">// binary constraint</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordtype">void</span> visitBinaryConstraint(<span class="keyword">const</span> AstBinaryConstraint&amp; rel)<span class="keyword"> override </span>{</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keyword">auto</span> <a class="code" href="_resolve_aliases_transformer_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a> = getVar(rel.getLHS());</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="keyword">auto</span> <a class="code" href="_resolve_aliases_transformer_8cpp.html#a99d7476d0087a8405f52a79852efa6eb">rhs</a> = getVar(rel.getRHS());</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(<a class="code" href="_resolve_aliases_transformer_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a>, rhs));</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(rhs, <a class="code" href="_resolve_aliases_transformer_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a>));</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="comment">// intrinsic functor</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordtype">void</span> visitIntrinsicFunctor(<span class="keyword">const</span> AstIntrinsicFunctor&amp; fun)<span class="keyword"> override </span>{</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <span class="keyword">auto</span> cur = getVar(fun);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="comment">// add a constraint for the return type of the functor</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">if</span> (fun.isNumerical()) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(cur, env.getNumberType()));</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="keywordflow">if</span> (fun.isSymbolic()) {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(cur, env.getSymbolType()));</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <span class="comment">// add a constraint for each argument of the functor</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">if</span> (fun.getFunction() == <a class="code" href="namespacesouffle.html#a28ddd8269d2a01a6041800d3b2e3fad9ac23431d0209648a6b31fa837dd56d681">FunctorOp::ORD</a>) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = 0; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> &lt; fun.getArity(); <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>++) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                <span class="keyword">auto</span> arg = getVar(fun.getArg(<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>));</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <span class="keywordflow">if</span> (fun.acceptsNumbers(<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>)) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(arg, env.getNumberType()));</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                <span class="keywordflow">if</span> (fun.acceptsSymbols(<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>)) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(arg, env.getSymbolType()));</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="comment">// user-defined functors</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordtype">void</span> visitUserDefinedFunctor(<span class="keyword">const</span> AstUserDefinedFunctor&amp; fun)<span class="keyword"> override </span>{</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keyword">auto</span> cur = getVar(fun);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="comment">// get functor declaration</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keyword">const</span> AstFunctorDeclaration* funDecl = program-&gt;getFunctorDeclaration(fun.getName());</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="comment">// check whether functor declaration exists</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="keywordflow">if</span> (funDecl != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                <span class="comment">// add a constraint for the return type</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                <span class="keywordflow">if</span> (funDecl-&gt;isNumerical()) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                    addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(cur, env.getNumberType()));</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                <span class="keywordflow">if</span> (funDecl-&gt;isSymbolic()) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                    addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(cur, env.getSymbolType()));</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                <span class="comment">// add constraints for arguments</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = 0; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> &lt; fun.getArgCount(); <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>++) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                    <span class="keyword">auto</span> arg = getVar(fun.getArg(<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>));</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                    <span class="comment">// check that usage does not exceed</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                    <span class="comment">// number of arguments in declaration</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                    <span class="keywordflow">if</span> (i &lt; funDecl-&gt;getArgCount()) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                        <span class="comment">// add constraints for the i-th argument</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                        <span class="keywordflow">if</span> (funDecl-&gt;acceptsNumbers(<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>)) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(arg, env.getNumberType()));</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                        }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                        <span class="keywordflow">if</span> (funDecl-&gt;acceptsSymbols(<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>)) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(arg, env.getSymbolType()));</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                        }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                    }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="comment">// counter</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordtype">void</span> visitCounter(<span class="keyword">const</span> AstCounter&amp; counter)<span class="keyword"> override </span>{</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="comment">// this value must be a number value</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(counter), env.getNumberType()));</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="comment">// components of records</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordtype">void</span> visitRecordInit(<span class="keyword">const</span> AstRecordInit&amp; init)<span class="keyword"> override </span>{</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <span class="comment">// link element types with sub-values</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="keyword">auto</span> rec = getVar(init);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = 0;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> AstArgument* value : init.getArguments()) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                addConstraint(isSubtypeOfComponent(getVar(value), rec, i++));</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="comment">// visit aggregates</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordtype">void</span> visitAggregator(<span class="keyword">const</span> AstAggregator&amp; agg)<span class="keyword"> override </span>{</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="comment">// this value must be a number value</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(agg), env.getNumberType()));</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="comment">// also, the target expression needs to be a number</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span> expr = agg.getTargetExpression()) {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                addConstraint(<a class="code" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">isSubtypeOf</a>(getVar(expr), env.getNumberType()));</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    };</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">// run analysis</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">return</span> Analysis(env, program).analyse(clause, logs);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div><div class="ttc" id="json11_8h_html_ae46bd26d7133dfe98f8cec7c5ac5c7a1"><div class="ttname"><a href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json11_8h_source.html#l00669">json11.h:669</a></div></div>
<div class="ttc" id="_resolve_aliases_transformer_8cpp_html_a99d7476d0087a8405f52a79852efa6eb"><div class="ttname"><a href="_resolve_aliases_transformer_8cpp.html#a99d7476d0087a8405f52a79852efa6eb">rhs</a></div><div class="ttdeci">std::unique_ptr&lt; AstArgument &gt; rhs</div><div class="ttdef"><b>Definition:</b> <a href="_resolve_aliases_transformer_8cpp_source.html#l00160">ResolveAliasesTransformer.cpp:160</a></div></div>
<div class="ttc" id="namespacesouffle_html_ab18cbb3adc2ab328de0db30a3fddf7e0"><div class="ttname"><a href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0">souffle::getAtomRelation</a></div><div class="ttdeci">const AstRelation * getAtomRelation(const AstAtom *atom, const AstProgram *program)</div><div class="ttdoc">Returns the relation referenced by the given atom. </div><div class="ttdef"><b>Definition:</b> <a href="_ast_utils_8cpp_source.html#l00049">AstUtils.cpp:49</a></div></div>
<div class="ttc" id="namespacesouffle_html_a8cc19c66d9d13ce64e65f14dcabb43b3"><div class="ttname"><a href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3">souffle::isSubtypeOf</a></div><div class="ttdeci">bool isSubtypeOf(const Type &amp;a, const Type &amp;b)</div><div class="ttdoc">Determines whether type a is a subtype of type b. </div><div class="ttdef"><b>Definition:</b> <a href="_type_system_8cpp_source.html#l00364">TypeSystem.cpp:364</a></div></div>
<div class="ttc" id="namespacesouffle_html_a28ddd8269d2a01a6041800d3b2e3fad9ac23431d0209648a6b31fa837dd56d681"><div class="ttname"><a href="namespacesouffle.html#a28ddd8269d2a01a6041800d3b2e3fad9ac23431d0209648a6b31fa837dd56d681">souffle::FunctorOp::ORD</a></div><div class="ttdoc">Unary Functor Operators. </div></div>
<div class="ttc" id="_resolve_aliases_transformer_8cpp_html_aae193eebe112e754a082b152fb272018"><div class="ttname"><a href="_resolve_aliases_transformer_8cpp.html#aae193eebe112e754a082b152fb272018">lhs</a></div><div class="ttdeci">std::unique_ptr&lt; AstArgument &gt; lhs</div><div class="ttdef"><b>Definition:</b> <a href="_resolve_aliases_transformer_8cpp_source.html#l00159">ResolveAliasesTransformer.cpp:159</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_type_analysis_ad03f4742d97ca60ab48f0f76ba0a1b0e_cgraph.png" border="0" usemap="#classsouffle_1_1_type_analysis_ad03f4742d97ca60ab48f0f76ba0a1b0e_cgraph" alt=""/></div>
<map name="classsouffle_1_1_type_analysis_ad03f4742d97ca60ab48f0f76ba0a1b0e_cgraph" id="classsouffle_1_1_type_analysis_ad03f4742d97ca60ab48f0f76ba0a1b0e_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_functor_declaration.html#a120d63958e1cf13f05c869a53fca8105" title="accepts the i&#45;th argument as a number value " alt="" coords="213,71,426,112"/>
<area shape="rect" id="node4" href="classsouffle_1_1_ast_intrinsic_functor.html#a5dbcc482e6d6321e822d13536b47c0ea" title="Check if the argument of this functor is a number type. " alt="" coords="493,127,683,168"/>
<area shape="rect" id="node6" href="classsouffle_1_1_ast_functor_declaration.html#ac55037912bc365633938c9375da6a052" title="accepts the i&#45;th argument as a symbolic value " alt="" coords="213,5,426,47"/>
<area shape="rect" id="node7" href="classsouffle_1_1_ast_intrinsic_functor.html#a939e4e20904cd54ebc807b9f133c5093" title="Check if the argument of this functor is a symbol type. " alt="" coords="225,188,414,229"/>
<area shape="rect" id="node9" href="classsouffle_1_1_ast_intrinsic_functor.html#a4ea87283ea223db7a5aef274f22aaef4" title="souffle::AstIntrinsicFunctor\l::getArg" alt="" coords="225,253,414,295"/>
<area shape="rect" id="node10" href="classsouffle_1_1_ast_user_defined_functor.html#ad119952e45e557d2e3bb53f9fbec0ba3" title="get argument " alt="" coords="210,319,429,360"/>
<area shape="rect" id="node11" href="classsouffle_1_1_ast_user_defined_functor.html#a2b3e1049abff321cbac8beadaaead1b1" title="get number of arguments " alt="" coords="210,384,429,425"/>
<area shape="rect" id="node12" href="classsouffle_1_1_ast_atom.html#a11ba399d723b5f1135a35e47e51e1bad" title="Provides access to the list of arguments of this atom. " alt="" coords="205,515,433,542"/>
<area shape="rect" id="node14" href="classsouffle_1_1_ast_record_init.html#ae516fe38512e96c666014acce207b983" title="souffle::AstRecordInit\l::getArguments" alt="" coords="242,449,397,491"/>
<area shape="rect" id="node15" href="classsouffle_1_1_ast_intrinsic_functor.html#a0bd547ce5d89b6715177ee440337040b" title="souffle::AstIntrinsicFunctor\l::getArity" alt="" coords="225,567,414,608"/>
<area shape="rect" id="node16" href="classsouffle_1_1_ast_negation.html#a0737c379dac1c350accecb1e2301698c" title="Returns the nested atom as the referenced atom. " alt="" coords="244,632,395,673"/>
<area shape="rect" id="node17" href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0" title="Returns the relation referenced by the given atom. " alt="" coords="230,698,409,725"/>
<area shape="rect" id="node20" href="classsouffle_1_1_ast_intrinsic_functor.html#ade20f5a1b1a17df61d5a69bbaed85fa6" title="souffle::AstIntrinsicFunctor\l::getFunction" alt="" coords="225,749,414,791"/>
<area shape="rect" id="node21" href="classsouffle_1_1_ast_program.html#adefbe0ff2aa1dee06bdb531b1f070a72" title="Get functor declaration. " alt="" coords="234,815,405,856"/>
<area shape="rect" id="node22" href="classsouffle_1_1_ast_binary_constraint.html#a26c7032570077e96344af46146f4360d" title="Return LHS argument. " alt="" coords="220,880,419,921"/>
<area shape="rect" id="node23" href="classsouffle_1_1_ast_user_defined_functor.html#a448b2831b5ead77c225c0f0a9f8596c7" title="get name " alt="" coords="210,945,429,987"/>
<area shape="rect" id="node24" href="classsouffle_1_1_type_environment.html#a3607b9fb617c47df3da5050384b5f635" title="souffle::TypeEnvironment\l::getNumberType" alt="" coords="771,903,953,944"/>
<area shape="rect" id="node25" href="classsouffle_1_1_ast_binary_constraint.html#a5b708f1d607128003c3205a7a0fd12f2" title="Return RHS argument. " alt="" coords="220,1215,419,1256"/>
<area shape="rect" id="node26" href="classsouffle_1_1_type_environment.html#a66b0c5761bcf5248516f08310f3b0817" title="souffle::TypeEnvironment\l::getSymbolType" alt="" coords="771,1105,953,1147"/>
<area shape="rect" id="node28" href="classsouffle_1_1_ast_aggregator.html#a59e520e92b927956903439a375c9ce62" title="souffle::AstAggregator\l::getTargetExpression" alt="" coords="237,1280,402,1321"/>
<area shape="rect" id="node29" href="classsouffle_1_1_type_environment.html#ad66cb326f809dc980e7901dfbe1fcdc5" title="souffle::TypeEnvironment\l::getType" alt="" coords="229,1345,410,1387"/>
<area shape="rect" id="node30" href="classsouffle_1_1_ast_functor_declaration.html#a52dcabf791f81a454657e26109d9a8f5" title="is return type a number value " alt="" coords="213,1411,426,1452"/>
<area shape="rect" id="node31" href="classsouffle_1_1_ast_intrinsic_functor.html#a154a4d82c55cb72fa3f4ae366800abf4" title="Check if the return value of this functor is a number type. " alt="" coords="493,1469,683,1511"/>
<area shape="rect" id="node33" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3" title="Determines whether type a is a subtype of type b. " alt="" coords="245,1062,394,1089"/>
<area shape="rect" id="node37" href="classsouffle_1_1_type_environment.html#af6f82790cb9e31b0efb8583894db3fa3" title="souffle::TypeEnvironment\l::isType" alt="" coords="497,1164,679,1205"/>
<area shape="rect" id="node38" href="classsouffle_1_1_ast_functor_declaration.html#ab54449b5ebb065bdc2b11b1f01e57d44" title="is return type a symbolic value " alt="" coords="213,1593,426,1635"/>
<area shape="rect" id="node39" href="classsouffle_1_1_ast_intrinsic_functor.html#aadd7c58be37bc4dfe871c9f9c8f7ce85" title="Check if the return value of this functor is a symbol type. " alt="" coords="225,1528,414,1569"/>
<area shape="rect" id="node3" href="classsouffle_1_1_ast_functor_declaration.html#a90861dd26b6dce3c180a6170ebeb40d1" title="get number of arguments " alt="" coords="481,32,695,73"/>
<area shape="rect" id="node5" href="namespacesouffle.html#af54a82cf0595dc6f8415763a876a3f7a" title="Determines whether an argument has a number value. " alt="" coords="769,160,955,201"/>
<area shape="rect" id="node8" href="namespacesouffle.html#a6d9e1b904960c5f16b6f5053faf38046" title="Determines whether an argument has a symbolic value. " alt="" coords="495,192,681,233"/>
<area shape="rect" id="node13" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="516,486,660,513"/>
<area shape="rect" id="node18" href="classsouffle_1_1_ast_atom.html#adfaa949dc3e89fa2dc25981963ea5752" title="Return the name of this atom. " alt="" coords="490,669,686,695"/>
<area shape="rect" id="node19" href="classsouffle_1_1_ast_program.html#ae4e787ea4d338524ea6b346d5dedc290" title="Find and return the relation in the program given its name. " alt="" coords="514,720,662,761"/>
<area shape="rect" id="node27" href="classsouffle_1_1_type.html#ad6bc765552db5681b11744f1585554bf" title="souffle::Type::print" alt="" coords="1029,1113,1167,1139"/>
<area shape="rect" id="node32" href="namespacesouffle.html#aeeb8dea5bbc4536ef82ed35b749f0973" title="Determines whether the given operator has a numeric return value. " alt="" coords="761,1506,963,1533"/>
<area shape="rect" id="node34" href="classsouffle_1_1_type.html#ac0e65ae3329b48ff0f0ad4c1b179b438" title="souffle::Type::getTypeEnvironment" alt="" coords="743,1011,981,1038"/>
<area shape="rect" id="node35" href="namespacesouffle.html#a4e502e6abb9a3e9a8e4c1168dbf23743" title="Determines whether the given type is a number type. " alt="" coords="507,961,669,987"/>
<area shape="rect" id="node36" href="namespacesouffle.html#a11f6c352eec6bde7b5a0b143ffe64e3b" title="Determines whether the given type is a symbol type. " alt="" coords="509,1062,667,1089"/>
<area shape="rect" id="node40" href="namespacesouffle.html#af36ca34d53ea186126d94f2e4f193670" title="souffle::isSymbolicFunctorOp" alt="" coords="485,1535,691,1562"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad712d537f166af824ce980aac5088b09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a> souffle::TypeAnalysis::getTypes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a> *&#160;</td>
          <td class="paramname"><em>argument</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the computed types for the given argument. </p>

<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00046">46</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>

<p>References <a class="el" href="_ast_type_analysis_8cpp_source.html#l00364">analyseTypes()</a>, and <a class="el" href="_ast_type_analysis_8h_source.html#l00066">argumentTypes</a>.</p>

<p>Referenced by <a class="el" href="_ast_semantic_checker_8cpp_source.html#l00071">souffle::AstSemanticChecker::checkProgram()</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                                        {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keyword">auto</span> found = <a class="code" href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">argumentTypes</a>.find(argument);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        assert(found != <a class="code" href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">argumentTypes</a>.end());</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">return</span> found-&gt;second;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div><div class="ttc" id="classsouffle_1_1_type_analysis_html_aa78a3ac07ebd79b4d3e3d1c277522178"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">souffle::TypeAnalysis::argumentTypes</a></div><div class="ttdeci">std::map&lt; const AstArgument *, TypeSet &gt; argumentTypes</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8h_source.html#l00066">AstTypeAnalysis.h:66</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_type_analysis_ad712d537f166af824ce980aac5088b09_cgraph.png" border="0" usemap="#classsouffle_1_1_type_analysis_ad712d537f166af824ce980aac5088b09_cgraph" alt=""/></div>
<map name="classsouffle_1_1_type_analysis_ad712d537f166af824ce980aac5088b09_cgraph" id="classsouffle_1_1_type_analysis_ad712d537f166af824ce980aac5088b09_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_type_analysis.html#ad03f4742d97ca60ab48f0f76ba0a1b0e" title="Analyse the given clause and computes for each contained argument a set of potential types..." alt="" coords="205,815,357,856"/>
<area shape="rect" id="node3" href="classsouffle_1_1_ast_functor_declaration.html#a120d63958e1cf13f05c869a53fca8105" title="accepts the i&#45;th argument as a number value " alt="" coords="413,71,626,112"/>
<area shape="rect" id="node5" href="classsouffle_1_1_ast_intrinsic_functor.html#a5dbcc482e6d6321e822d13536b47c0ea" title="Check if the argument of this functor is a number type. " alt="" coords="693,127,883,168"/>
<area shape="rect" id="node7" href="classsouffle_1_1_ast_functor_declaration.html#ac55037912bc365633938c9375da6a052" title="accepts the i&#45;th argument as a symbolic value " alt="" coords="413,5,626,47"/>
<area shape="rect" id="node8" href="classsouffle_1_1_ast_intrinsic_functor.html#a939e4e20904cd54ebc807b9f133c5093" title="Check if the argument of this functor is a symbol type. " alt="" coords="425,188,614,229"/>
<area shape="rect" id="node10" href="classsouffle_1_1_ast_intrinsic_functor.html#a4ea87283ea223db7a5aef274f22aaef4" title="souffle::AstIntrinsicFunctor\l::getArg" alt="" coords="425,253,614,295"/>
<area shape="rect" id="node11" href="classsouffle_1_1_ast_user_defined_functor.html#ad119952e45e557d2e3bb53f9fbec0ba3" title="get argument " alt="" coords="410,319,629,360"/>
<area shape="rect" id="node12" href="classsouffle_1_1_ast_user_defined_functor.html#a2b3e1049abff321cbac8beadaaead1b1" title="get number of arguments " alt="" coords="410,384,629,425"/>
<area shape="rect" id="node13" href="classsouffle_1_1_ast_atom.html#a11ba399d723b5f1135a35e47e51e1bad" title="Provides access to the list of arguments of this atom. " alt="" coords="405,515,633,542"/>
<area shape="rect" id="node15" href="classsouffle_1_1_ast_record_init.html#ae516fe38512e96c666014acce207b983" title="souffle::AstRecordInit\l::getArguments" alt="" coords="442,449,597,491"/>
<area shape="rect" id="node16" href="classsouffle_1_1_ast_intrinsic_functor.html#a0bd547ce5d89b6715177ee440337040b" title="souffle::AstIntrinsicFunctor\l::getArity" alt="" coords="425,567,614,608"/>
<area shape="rect" id="node17" href="classsouffle_1_1_ast_negation.html#a0737c379dac1c350accecb1e2301698c" title="Returns the nested atom as the referenced atom. " alt="" coords="444,632,595,673"/>
<area shape="rect" id="node18" href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0" title="Returns the relation referenced by the given atom. " alt="" coords="430,698,609,725"/>
<area shape="rect" id="node21" href="classsouffle_1_1_ast_intrinsic_functor.html#ade20f5a1b1a17df61d5a69bbaed85fa6" title="souffle::AstIntrinsicFunctor\l::getFunction" alt="" coords="425,749,614,791"/>
<area shape="rect" id="node22" href="classsouffle_1_1_ast_program.html#adefbe0ff2aa1dee06bdb531b1f070a72" title="Get functor declaration. " alt="" coords="434,815,605,856"/>
<area shape="rect" id="node23" href="classsouffle_1_1_ast_binary_constraint.html#a26c7032570077e96344af46146f4360d" title="Return LHS argument. " alt="" coords="420,880,619,921"/>
<area shape="rect" id="node24" href="classsouffle_1_1_ast_user_defined_functor.html#a448b2831b5ead77c225c0f0a9f8596c7" title="get name " alt="" coords="410,945,629,987"/>
<area shape="rect" id="node25" href="classsouffle_1_1_type_environment.html#a3607b9fb617c47df3da5050384b5f635" title="souffle::TypeEnvironment\l::getNumberType" alt="" coords="971,903,1153,944"/>
<area shape="rect" id="node26" href="classsouffle_1_1_ast_binary_constraint.html#a5b708f1d607128003c3205a7a0fd12f2" title="Return RHS argument. " alt="" coords="420,1215,619,1256"/>
<area shape="rect" id="node27" href="classsouffle_1_1_type_environment.html#a66b0c5761bcf5248516f08310f3b0817" title="souffle::TypeEnvironment\l::getSymbolType" alt="" coords="971,1105,1153,1147"/>
<area shape="rect" id="node29" href="classsouffle_1_1_ast_aggregator.html#a59e520e92b927956903439a375c9ce62" title="souffle::AstAggregator\l::getTargetExpression" alt="" coords="437,1280,602,1321"/>
<area shape="rect" id="node30" href="classsouffle_1_1_type_environment.html#ad66cb326f809dc980e7901dfbe1fcdc5" title="souffle::TypeEnvironment\l::getType" alt="" coords="429,1345,610,1387"/>
<area shape="rect" id="node31" href="classsouffle_1_1_ast_functor_declaration.html#a52dcabf791f81a454657e26109d9a8f5" title="is return type a number value " alt="" coords="413,1411,626,1452"/>
<area shape="rect" id="node32" href="classsouffle_1_1_ast_intrinsic_functor.html#a154a4d82c55cb72fa3f4ae366800abf4" title="Check if the return value of this functor is a number type. " alt="" coords="693,1469,883,1511"/>
<area shape="rect" id="node34" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3" title="Determines whether type a is a subtype of type b. " alt="" coords="445,1062,594,1089"/>
<area shape="rect" id="node38" href="classsouffle_1_1_type_environment.html#af6f82790cb9e31b0efb8583894db3fa3" title="souffle::TypeEnvironment\l::isType" alt="" coords="697,1164,879,1205"/>
<area shape="rect" id="node39" href="classsouffle_1_1_ast_functor_declaration.html#ab54449b5ebb065bdc2b11b1f01e57d44" title="is return type a symbolic value " alt="" coords="413,1593,626,1635"/>
<area shape="rect" id="node40" href="classsouffle_1_1_ast_intrinsic_functor.html#aadd7c58be37bc4dfe871c9f9c8f7ce85" title="Check if the return value of this functor is a symbol type. " alt="" coords="425,1528,614,1569"/>
<area shape="rect" id="node4" href="classsouffle_1_1_ast_functor_declaration.html#a90861dd26b6dce3c180a6170ebeb40d1" title="get number of arguments " alt="" coords="681,32,895,73"/>
<area shape="rect" id="node6" href="namespacesouffle.html#af54a82cf0595dc6f8415763a876a3f7a" title="Determines whether an argument has a number value. " alt="" coords="969,160,1155,201"/>
<area shape="rect" id="node9" href="namespacesouffle.html#a6d9e1b904960c5f16b6f5053faf38046" title="Determines whether an argument has a symbolic value. " alt="" coords="695,192,881,233"/>
<area shape="rect" id="node14" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="716,486,860,513"/>
<area shape="rect" id="node19" href="classsouffle_1_1_ast_atom.html#adfaa949dc3e89fa2dc25981963ea5752" title="Return the name of this atom. " alt="" coords="690,669,886,695"/>
<area shape="rect" id="node20" href="classsouffle_1_1_ast_program.html#ae4e787ea4d338524ea6b346d5dedc290" title="Find and return the relation in the program given its name. " alt="" coords="714,720,862,761"/>
<area shape="rect" id="node28" href="classsouffle_1_1_type.html#ad6bc765552db5681b11744f1585554bf" title="souffle::Type::print" alt="" coords="1229,1113,1367,1139"/>
<area shape="rect" id="node33" href="namespacesouffle.html#aeeb8dea5bbc4536ef82ed35b749f0973" title="Determines whether the given operator has a numeric return value. " alt="" coords="961,1506,1163,1533"/>
<area shape="rect" id="node35" href="classsouffle_1_1_type.html#ac0e65ae3329b48ff0f0ad4c1b179b438" title="souffle::Type::getTypeEnvironment" alt="" coords="943,1011,1181,1038"/>
<area shape="rect" id="node36" href="namespacesouffle.html#a4e502e6abb9a3e9a8e4c1168dbf23743" title="Determines whether the given type is a number type. " alt="" coords="707,961,869,987"/>
<area shape="rect" id="node37" href="namespacesouffle.html#a11f6c352eec6bde7b5a0b143ffe64e3b" title="Determines whether the given type is a symbol type. " alt="" coords="709,1062,867,1089"/>
<area shape="rect" id="node41" href="namespacesouffle.html#af36ca34d53ea186126d94f2e4f193670" title="souffle::isSymbolicFunctorOp" alt="" coords="685,1535,891,1562"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad8b14d983a147434ebbbea66d4072229"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void souffle::TypeAnalysis::print </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>print the analysis result in HTML format </p>

<p>Reimplemented from <a class="el" href="classsouffle_1_1_ast_analysis.html#af5abc70c9703ab7d367759b361a0ac66">souffle::AstAnalysis</a>.</p>

<p>Definition at line <a class="el" href="_ast_type_analysis_8cpp_source.html#l00351">351</a> of file <a class="el" href="_ast_type_analysis_8cpp_source.html">AstTypeAnalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                                             {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    os &lt;&lt; <span class="stringliteral">&quot;-- Analysis logs --&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    os &lt;&lt; <a class="code" href="classsouffle_1_1_type_analysis.html#afc9b7ee6a35619da76e4277ee8b63ed3">analysisLogs</a>.str() &lt;&lt; std::endl;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    os &lt;&lt; <span class="stringliteral">&quot;-- Result --&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; cur : <a class="code" href="classsouffle_1_1_type_analysis.html#ac9b0bfb44850f1c3295306cd9cea7c84">annotatedClauses</a>) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        os &lt;&lt; *cur &lt;&lt; std::endl;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div><div class="ttc" id="classsouffle_1_1_type_analysis_html_ac9b0bfb44850f1c3295306cd9cea7c84"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#ac9b0bfb44850f1c3295306cd9cea7c84">souffle::TypeAnalysis::annotatedClauses</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; AstClause &gt; &gt; annotatedClauses</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8h_source.html#l00067">AstTypeAnalysis.h:67</a></div></div>
<div class="ttc" id="classsouffle_1_1_type_analysis_html_afc9b7ee6a35619da76e4277ee8b63ed3"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#afc9b7ee6a35619da76e4277ee8b63ed3">souffle::TypeAnalysis::analysisLogs</a></div><div class="ttdeci">std::stringstream analysisLogs</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8h_source.html#l00068">AstTypeAnalysis.h:68</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a37750304e3c3efc004294bbc934e8549"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void souffle::TypeAnalysis::run </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;&#160;</td>
          <td class="paramname"><em>translationUnit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>run analysis for a RAM translation unit </p>

<p>Implements <a class="el" href="classsouffle_1_1_ast_analysis.html#a1d096d11d2b9fbd6b98ccd89d761f719">souffle::AstAnalysis</a>.</p>

<p>Definition at line <a class="el" href="_ast_type_analysis_8cpp_source.html#l00327">327</a> of file <a class="el" href="_ast_type_analysis_8cpp_source.html">AstTypeAnalysis.cpp</a>.</p>

<p>References <a class="el" href="_global_8h_source.html#l00135">souffle::Global::config()</a>, <a class="el" href="_ast_type_analysis_8cpp_source.html#l00264">souffle::createAnnotatedClause()</a>, <a class="el" href="_ast_translation_unit_8h_source.html#l00046">souffle::AstTranslationUnit::getAnalysis()</a>, <a class="el" href="_ast_translation_unit_8h_source.html#l00058">souffle::AstTranslationUnit::getProgram()</a>, and <a class="el" href="_ast_program_8cpp_source.html#l00151">souffle::AstProgram::getRelations()</a>.</p>
<div class="fragment"><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                                                                {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// Check if debugging information is being generated and note where logs should be sent</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    std::ostream* debugStream = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640">Global::config</a>().<span class="keyword">get</span>(<span class="stringliteral">&quot;debug-report&quot;</span>).empty()) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        debugStream = &amp;<a class="code" href="classsouffle_1_1_type_analysis.html#afc9b7ee6a35619da76e4277ee8b63ed3">analysisLogs</a>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">auto</span>* typeEnvAnalysis = translationUnit.getAnalysis&lt;TypeEnvironmentAnalysis&gt;();</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> AstRelation* rel : translationUnit.getProgram()-&gt;getRelations()) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> AstClause* clause : rel-&gt;getClauses()) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="comment">// Perform the type analysis</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            std::map&lt;const AstArgument*, TypeSet&gt; clauseArgumentTypes =</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    <a class="code" href="classsouffle_1_1_type_analysis.html#ad03f4742d97ca60ab48f0f76ba0a1b0e">analyseTypes</a>(typeEnvAnalysis-&gt;getTypeEnvironment(), *clause, translationUnit.getProgram(),</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                            debugStream);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <a class="code" href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">argumentTypes</a>.insert(clauseArgumentTypes.begin(), clauseArgumentTypes.end());</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">if</span> (debugStream != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <span class="comment">// Store an annotated clause for printing purposes</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                AstClause* annotatedClause = <a class="code" href="namespacesouffle.html#a42eef65f1512c8189dc19ae26f200acc">createAnnotatedClause</a>(clause, clauseArgumentTypes);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <a class="code" href="classsouffle_1_1_type_analysis.html#ac9b0bfb44850f1c3295306cd9cea7c84">annotatedClauses</a>.emplace_back(annotatedClause);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div><div class="ttc" id="classsouffle_1_1_type_analysis_html_ac9b0bfb44850f1c3295306cd9cea7c84"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#ac9b0bfb44850f1c3295306cd9cea7c84">souffle::TypeAnalysis::annotatedClauses</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; AstClause &gt; &gt; annotatedClauses</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8h_source.html#l00067">AstTypeAnalysis.h:67</a></div></div>
<div class="ttc" id="namespacesouffle_html_a42eef65f1512c8189dc19ae26f200acc"><div class="ttname"><a href="namespacesouffle.html#a42eef65f1512c8189dc19ae26f200acc">souffle::createAnnotatedClause</a></div><div class="ttdeci">AstClause * createAnnotatedClause(const AstClause *clause, const std::map&lt; const AstArgument *, TypeSet &gt; argumentTypes)</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8cpp_source.html#l00264">AstTypeAnalysis.cpp:264</a></div></div>
<div class="ttc" id="classsouffle_1_1_global_html_a2dcb257b0f98d0b882862427cc965640"><div class="ttname"><a href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640">souffle::Global::config</a></div><div class="ttdeci">static MainConfig &amp; config()</div><div class="ttdef"><b>Definition:</b> <a href="_global_8h_source.html#l00135">Global.h:135</a></div></div>
<div class="ttc" id="classsouffle_1_1_type_analysis_html_aa78a3ac07ebd79b4d3e3d1c277522178"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#aa78a3ac07ebd79b4d3e3d1c277522178">souffle::TypeAnalysis::argumentTypes</a></div><div class="ttdeci">std::map&lt; const AstArgument *, TypeSet &gt; argumentTypes</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8h_source.html#l00066">AstTypeAnalysis.h:66</a></div></div>
<div class="ttc" id="classsouffle_1_1_type_analysis_html_afc9b7ee6a35619da76e4277ee8b63ed3"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#afc9b7ee6a35619da76e4277ee8b63ed3">souffle::TypeAnalysis::analysisLogs</a></div><div class="ttdeci">std::stringstream analysisLogs</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8h_source.html#l00068">AstTypeAnalysis.h:68</a></div></div>
<div class="ttc" id="classsouffle_1_1_type_analysis_html_ad03f4742d97ca60ab48f0f76ba0a1b0e"><div class="ttname"><a href="classsouffle_1_1_type_analysis.html#ad03f4742d97ca60ab48f0f76ba0a1b0e">souffle::TypeAnalysis::analyseTypes</a></div><div class="ttdeci">static std::map&lt; const AstArgument *, TypeSet &gt; analyseTypes(const TypeEnvironment &amp;env, const AstClause &amp;clause, const AstProgram *program, std::ostream *logs=nullptr)</div><div class="ttdoc">Analyse the given clause and computes for each contained argument a set of potential types...</div><div class="ttdef"><b>Definition:</b> <a href="_ast_type_analysis_8cpp_source.html#l00364">AstTypeAnalysis.cpp:364</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_type_analysis_a37750304e3c3efc004294bbc934e8549_cgraph.png" border="0" usemap="#classsouffle_1_1_type_analysis_a37750304e3c3efc004294bbc934e8549_cgraph" alt=""/></div>
<map name="classsouffle_1_1_type_analysis_a37750304e3c3efc004294bbc934e8549_cgraph" id="classsouffle_1_1_type_analysis_a37750304e3c3efc004294bbc934e8549_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640" title="souffle::Global::config" alt="" coords="249,19,407,46"/>
<area shape="rect" id="node3" href="namespacesouffle.html#a42eef65f1512c8189dc19ae26f200acc" title="souffle::createAnnotated\lClause" alt="" coords="238,71,418,112"/>
<area shape="rect" id="node10" href="classsouffle_1_1_ast_translation_unit.html#a7a1598acb91192e90026763b3b968653" title="get analysis: analysis is generated on the fly if not present " alt="" coords="235,136,421,177"/>
<area shape="rect" id="node11" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="235,201,421,243"/>
<area shape="rect" id="node12" href="classsouffle_1_1_ast_program.html#a60fcb7d3a21a06be7b48f5849917a22b" title="Get all relations in the program. " alt="" coords="254,267,402,308"/>
<area shape="rect" id="node4" href="classsouffle_1_1_ast_clause.html#ab7a5b630d02cd69873aab066c2bd9c46" title="Mutates this node. " alt="" coords="483,5,619,47"/>
<area shape="rect" id="node5" href="classsouffle_1_1_ast_clause.html#aef9cb574a067db73c83fd9c9f63d297f" title="Creates a clone of this AST sub&#45;structure. " alt="" coords="483,71,619,112"/>
<area shape="rect" id="node7" href="namespacesouffle.html#a384e85f786c545758984fbf4c59e1016" title="A utility function visiting all nodes within the ast rooted by the given node recursively in a depth&#45;..." alt="" coords="469,137,632,163"/>
<area shape="rect" id="node6" href="classsouffle_1_1_ast_node.html#a68e6e13cb8d1510e47087447a89cae83" title="Return source location of the AstNode. " alt="" coords="680,78,879,105"/>
<area shape="rect" id="node8" href="namespacesouffle.html#ab6ba329441fe5a6af5ebb8cde167d66f" title="A utility function visiting all nodes within the ast rooted by the given node recursively in a depth&#45;..." alt="" coords="698,129,861,171"/>
<area shape="rect" id="node9" href="classsouffle_1_1_ast_node.html#a3726392849b2a07142ba13bbd5fb16d2" title="Obtain a list of all embedded AST child nodes. " alt="" coords="927,129,1113,171"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="afc9b7ee6a35619da76e4277ee8b63ed3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::stringstream souffle::TypeAnalysis::analysisLogs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00068">68</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac9b0bfb44850f1c3295306cd9cea7c84"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::unique_ptr&lt;<a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a>&gt; &gt; souffle::TypeAnalysis::annotatedClauses</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00067">67</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa78a3ac07ebd79b4d3e3d1c277522178"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;const <a class="el" href="classsouffle_1_1_ast_argument.html">AstArgument</a>*, <a class="el" href="structsouffle_1_1_type_set.html">TypeSet</a>&gt; souffle::TypeAnalysis::argumentTypes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00066">66</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>

<p>Referenced by <a class="el" href="_ast_type_analysis_8h_source.html#l00046">getTypes()</a>.</p>

</div>
</div>
<a class="anchor" id="a88c2b46242dcb7466a869059309b965e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr const char* souffle::TypeAnalysis::name = &quot;type-analysis&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ast_type_analysis_8h_source.html#l00037">37</a> of file <a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_ast_type_analysis_8h_source.html">AstTypeAnalysis.h</a></li>
<li><a class="el" href="_ast_type_analysis_8cpp_source.html">AstTypeAnalysis.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
